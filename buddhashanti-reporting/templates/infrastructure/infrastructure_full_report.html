{% load nepali_filters %}

<!-- Infrastructure Full Report Partial for PDF -->
<div class="infrastructure-full-section">
  <!-- Infrastructure Chapter Introduction -->
  <div class="content-section">
    <div class="content-paragraph" style="font-size: 11pt; margin-bottom: 2em">
      भौतिक पूर्वाधार कुनै पनि स्थानीय तहको आर्थिक तथा सामाजिक विकासको
      महत्वपूर्ण आधार हो । पोखरा महानगरपालिकाको भौतिक पूर्वाधारको अवस्थाको
      यो खण्डमा सडक, यातायात, बजार केन्द्रसम्मको पहुँच र अन्य आधारभूत
      संरचनाहरूको विस्तृत विश्लेषण प्रस्तुत गरिएको छ । यातायातको सुविधा, सडकको
      अवस्था, र बजार केन्द्रसम्मको समयावधिका आधारमा गाउँपालिकाको भौतिक
      पूर्वाधारको प्रगतिको मूल्याङ्कन गरिएको छ । यस अध्ययनले गाउँपालिकाको
      पूर्वाधार क्षमता, उपलब्धि र भविष्यका चुनौतीहरूको समग्र चित्रण गरेको छ ।
    </div>
  </div>

  <!-- Road Status Section -->
  {% if all_infrastructure_data.road_status %} {% include
  'infrastructure/road_status/road_status_report_partial.html' with
  municipality_data=all_infrastructure_data.road_status.municipality_data
  ward_data=all_infrastructure_data.road_status.ward_data
  total_households=all_infrastructure_data.road_status.total_households
  coherent_analysis=all_infrastructure_data.road_status.coherent_analysis
  pdf_charts=all_infrastructure_data.road_status.pdf_charts %} {% endif %}

  <!-- Public Transport Section -->
  {% if all_infrastructure_data.public_transport %} {% include
  'infrastructure/public_transport/public_transport_report_partial.html' with
  municipality_data=all_infrastructure_data.public_transport.municipality_data
  ward_data=all_infrastructure_data.public_transport.ward_data
  total_households=all_infrastructure_data.public_transport.total_households
  coherent_analysis=all_infrastructure_data.public_transport.coherent_analysis
  pdf_charts=all_infrastructure_data.public_transport.pdf_charts %} {% endif %}

  <!-- Market Center Time Section -->
  {% if all_infrastructure_data.market_center_time %} {% include
  'infrastructure/market_center_time/market_center_time_report_partial.html'
  with
  municipality_data=all_infrastructure_data.market_center_time.municipality_data
  ward_data=all_infrastructure_data.market_center_time.ward_data
  total_households=all_infrastructure_data.market_center_time.total_households
  coherent_analysis=all_infrastructure_data.market_center_time.coherent_analysis
  pdf_charts=all_infrastructure_data.market_center_time.pdf_charts %} {% endif
  %}
</div>

<style>
  /* Infrastructure Full Report Styles */
  .infrastructure-full-section {
    page-break-inside: auto;
    margin-bottom: 2em;
  }

  .infrastructure-summary-section {
    margin-top: 3em;
    page-break-inside: auto;
  }

  .infrastructure-summary-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1em 0;
    font-size: 9pt;
  }

  .infrastructure-summary-table th,
  .infrastructure-summary-table td {
    border: 1px solid #333;
    padding: 8px;
    vertical-align: top;
  }

  .infrastructure-summary-table th {
    background-color: #f8fafc;
    font-weight: bold;
    text-align: center;
    color: #1e40af;
  }

  .content-paragraph {
    margin-bottom: 1.5em;
    line-height: 1.6;
  }

  .content-paragraph p {
    margin-bottom: 1em;
    text-align: justify;
  }

  .content-paragraph strong {
    color: #1e40af;
    font-weight: 600;
  }

  .table-title {
    color: #1e40af;
    font-size: 12pt;
    font-weight: bold;
    margin-bottom: 0.5em;
    text-align: center;
  }

  .content-section {
    margin-bottom: 2em;
  }

  .table-section {
    margin-bottom: 2em;
  }

  .pdf-data-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1em 0;
    font-size: 9pt;
    page-break-inside: auto;
  }

  .pdf-data-table th,
  .pdf-data-table td {
    border: 1px solid #333;
    padding: 4px 6px;
    text-align: left;
    vertical-align: top;
  }

  .pdf-data-table th {
    background-color: #f0f0f0;
    font-weight: bold;
    text-align: center;
  }

  .pdf-chart-container {
    text-align: center;
    margin: 1em 0;
    page-break-inside: auto;
  }

  .pdf-chart-container svg {
    max-width: 100%;
    max-height: 400px;
    height: auto;
  }

  .chart-title {
    font-size: 11pt;
    font-weight: bold;
    color: #333;
    margin: 0.5em 0;
    text-align: center;
  }

  .chart-section {
    margin: 1.5em 0;
  }

  /* Color coding for road status */
  .road-status-summary-table tbody tr:nth-child(1) td:first-child {
    color: #2e7d32; /* Blacktopped - Dark Green */
  }

  .road-status-summary-table tbody tr:nth-child(2) td:first-child {
    color: #4caf50; /* Graveled - Green */
  }

  .road-status-summary-table tbody tr:nth-child(3) td:first-child {
    color: #ff9800; /* Earthen - Orange */
  }

  .road-status-summary-table tbody tr:nth-child(4) td:first-child {
    color: #f44336; /* No Road - Red */
  }

  /* Time duration color coding */
  .public-transport-summary-table tbody tr:nth-child(1) td:first-child,
  .market-center-time-summary-table tbody tr:nth-child(1) td:first-child {
    color: #22c55e; /* Under 15 min - Green */
  }

  .public-transport-summary-table tbody tr:nth-child(2) td:first-child,
  .market-center-time-summary-table tbody tr:nth-child(2) td:first-child {
    color: #84cc16; /* 15-30 min - Light Green */
  }

  .public-transport-summary-table tbody tr:nth-child(3) td:first-child,
  .market-center-time-summary-table tbody tr:nth-child(3) td:first-child {
    color: #f59e0b; /* 30-60 min - Amber */
  }

  .public-transport-summary-table tbody tr:nth-child(4) td:first-child,
  .market-center-time-summary-table tbody tr:nth-child(4) td:first-child {
    color: #ef4444; /* 1+ hour - Red */
  }

  /* Print optimization */
  @media print {
    .infrastructure-full-section {
      page-break-inside: auto;
    }

    .infrastructure-summary-section {
      page-break-before: auto;
    }

    .table-section {
      page-break-inside: auto;
    }

    .pdf-data-table {
      font-size: 8pt;
    }

    .pdf-data-table tr {
      page-break-inside: auto;
    }

    .chart-section {
      page-break-inside: avoid;
    }
  }
</style>
